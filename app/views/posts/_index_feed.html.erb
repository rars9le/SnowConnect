<ul class="list-unstyled row mx-auto post-cards d-flex flex-column">
  <% posts.each do |post| %>
    <div class="border-top">
      <div class="card border-0">
        <div class="card-header bg-transparent border-0" >
          <div class="post-user">
            <% if post.user.avator? %>
              <%= link_to image_tag(post.user.avator.to_s, class: 'user_avator', alt: 'avator image'), post.user, class: 'mr-2' %>
            <% else %>
              <%= link_to image_tag('default.png', class: 'user_avator', alt: 'avator image'), post.user, class: 'mr-2' %>
            <% end %>
            <%= link_to post.user.name, post.user %>
          </div>
          <div class="post-info">
            <small><%= post.created_at.to_s(:datetime_jp) %></small>
          </div>
        </div>
        <div class="card-body p-2">
          <span><%= simple_format(post.content) %></span>
          <% if post.image? %>
            <% if post.image.file.content_type.to_s.include?('image/') %>
              <%= link_to post.image.url, "data-lightbox": post.image do %>
                <%= image_tag(post.image.url(:thumb), alt: 'post image') %>
              <% end %>
            <% else %>
                <%= video_tag post.image.url, width: "468", height: "260", controls: true, autobuffer: true %>  
            <% end %>
          <% end %> 
          <div class="pt-2 pb-1">
            <span><%= "コメント#{post.comments.count}件" %></span>
            <span><%= "いいね！#{post.favorites.count}件" %></span>
          </div>
        </div>

      </div>
    </div>
  <% end %> 

<%= paginate posts %>
</ul>

<!--%= render 'shared/infinitescroll' %-->